# Input System

The input system within the Innoactive Creator is implemented similar to Unity's Input System (new) and adds an additional abstraction layer. This allows template developers to implement their own input handling. The default one used in the Creator is based on the Unity Input System.

## Edit Key bindings
To edit your key bindings go to the Creator Settings > Spectator and click _Edit key bindings_.

## To implement your own actions for your MonoBehavior, follow these steps:
1. Instead of extending MonoBehavior, extend InputActionListener
```
public class SpectatorController : InputActionListener
```
2. Add methods which are named after the event name you want to listen to
```
protected virtual void SetToTrainee(InputController.InputEventArgs args)
{
    SetToSpecificCamera(traineeCamera);
}
```

3. Call the RegisterInputEvent/UnregisterInputEvent in OnEnable/OnDisable
```
protected new void OnEnable()
{
    base.OnEnable();            
    RegisterInputEvent(SetToTrainee);
}

protected new void OnDisable()
{
    UnregisterInputEvent(SetToTrainee);            
    base.OnDisable();
}
```
4. Add the action to your custom key bindings, which should be under Assets/Resources/KeyBindings/CreatorCustomKeyBindings

![Key Bindings menu](../images/input-system/keybindings.png)

5. If you want to overwrite the default bindings you will have to extend the BaseRuntimeConfiguration, overwriting the DefaultInputActionAssetPath and CustomInputActionAssetPath property.

## Set Focus / Disable Key bindings

The InputController allows to focus a specific listener, which is for example required to limit the input during text input in a text field or browser. A specific focus target can be set by calling `void Focus(IInputFocus target)` and also released via `void ReleaseFocus()`. Setting a specific focus has two effects:

1. All events generated by the InputController will only be sent to the focused target
2. If the `IInputFocus` implementation does define a specific action map, this action map will be set active.

For example, if we want to ignore all input actions (to not accidentally call any UI actions) while the trainee has to work within a browser we can create a new `LockableProperty` which is also an `IInputFocus`. In the case of the Desktop Mode the focus handling is done automatically, in VR we would still have to set the focus. After setting the focus to this script, the new ActionMap would be set active, which is missing any actions we dont want to allow. In result no input will trigger any UI actions until the browser is unfocused again.

```
using Innoactive.Creator.Core.Input;
using Innoactive.Creator.Core.Properties;
using UnityEngine;

/// <summary>
/// Can be used to focus a ZFBrowser, will lock down all keyboard input besides the browser itself.
/// To interact with the browser this property has to be unlocked in the according step.
///
/// <remarks>You also have to create a new action map in your input controlls which is named "FocusKeyboard".</remarks>
/// </summary>
public class ZFBrowserProperty : LockableProperty, IInputFocus
{
    public string ActionMapName { get; } = "FocusKeyboard";

    public bool CanBeFocused => IsLocked == false;
    
    public void OnFocus()
    {
        // Highlight that the browser is selected.
    }

    public void OnReleaseFocus()
    {
        // Remove highlight.
    }

    protected override void InternalSetLocked(bool lockState)
    {
        // Without active collider no interaction possible.
        foreach (Collider collider in GetComponents<Collider>())
        {
            collider.enabled = !lockState;
        }
    }
}
```

[To the next chapter!](12-text-to-speech.md)